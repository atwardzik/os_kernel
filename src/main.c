#include "../include/drivers/gpio.h"
#include "drivers/keyboard.h"
#include "drivers/time.h"
#include "drivers/uart.h"
#include "drivers/vga.h"
#include "fs/file.h"
#include "fs/ramfs.h"
#include "kernel/memory.h"
#include "kernel/proc.h"
#include "kernel/resets.h"
#include "kernel/syscalls.h"
#include "klibc/kstdio.h"
#include "klibc/kstring.h"
#include "tty.h"

#include <fcntl.h>
#include <signal.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <sys/errno.h>
#include <sys/unistd.h>
#include <sys/wait.h>

struct cpio_newc_header {
        char c_magic[6];
        char c_ino[8];
        char c_mode[8];
        char c_uid[8];
        char c_gid[8];
        char c_nlink[8];
        char c_mtime[8];
        char c_filesize[8];
        char c_devmajor[8];
        char c_devminor[8];
        char c_rdevmajor[8];
        char c_rdevminor[8];
        char c_namesize[8];
        char c_check[8];
};

void proc1_terminate_signal_handler(int signum) {
        if (signum == SIGTERM) {
                printf("[SIGTERM DETECTED] I don't want to exit, but as you wish\n");
        }

        exit(-1);
}

void proc1(void) {
        signal(SIGTERM, proc1_terminate_signal_handler);

        while (1) {
                xor_pin(11);
                delay_ms(250);
        }
}

int proc2_main(void) {
        printf("\x1b[33;40m[!]Welcome from proc2\x1b[0m\n");

        char buffer[255];

        printf(" ~ ");
        fgets(buffer, 255, stdin);
        printf("Response: %s\n", buffer);

        return 0;
}

void PATER_ADAMVS_SIGINT(int signum) {
        printf("\x1b[91;40mTrying to exit the init process is a bloody bad idea.\x1b[0m\n");
}

static uint16_t raw_bytes_function[] __attribute__((aligned(4))) = {
        0xf04f, 0x0001, 0xf20f, 0x010c, 0xf04f, 0x020d, 0xdf04, 0xf04f, 0x0000,
        0xdf01, 0x6548, 0x6c6c, 0x206f, 0x6f57, 0x6c72, 0x2164, 0x0000, 0xbf00,
};

static uint16_t raw_ls[] __attribute__((aligned(4))) = {
        // 0xb580, 0xb08e, 0xaf00, 0x6078, 0x6039, 0x683b, 0x685b, 0xf44f, 0x1100, 0x4618, 0xdf05, 0x6378, 0xe012, 0xf107,
        // 0x030c, 0x3308, 0xb408, 0x4618, 0xf000, 0xf824, 0x4602, 0xf04f, 0x0001, 0xbc02, 0xdf04, 0xf04f, 0x0001, 0xf20f,
        // 0x014a, 0xf04f, 0x0201, 0xdf04, 0xf107, 0x030c, 0x4619, 0x6b78, 0xdf08, 0x4603, 0x2b00, 0xd1e4, 0x2300, 0x4618,
        // 0x3738, 0x46bd, 0xf04f, 0x0000, 0xe8bd, 0x4080, 0xdf01, 0xbf00, 0xf3af, 0x8000, 0xf3af, 0x8000, 0xf3af, 0x8000,
        // 0x2100, 0x6802, 0x2a00, 0xd002, 0x3101, 0x3001, 0xe7f9, 0x4608, 0x4770, 0x000a,

        0xe011, 0xdf01, 0x46c0, 0xb580, 0xb086, 0xaf00, 0x60f8, 0x60b9, 0x607a, 0xdf04, 0x1c03, 0x617b, 0x697b, 0x0018,
        0x46bd, 0xb006, 0xbc80, 0xbc02, 0x4708, 0xb580, 0xb082, 0xaf00, 0x4b07, 0x447b, 0x607b, 0x687b, 0x220d, 0x0019,
        0x2001, 0xf7ff, 0xffe4, 0x2300, 0x0018, 0x46bd, 0xb002, 0xbc80, 0xbc02, 0x4708, 0x001e, 0x0000, 0x6548, 0x6c6c,
        0x206f, 0x6f57, 0x6c72, 0x2164, 0x000a
};

static char cpio_archive[] __attribute__((aligned(4))) __attribute__((section(".text"))) = {
        0x30, 0x37, 0x30, 0x37, 0x30, 0x31, 0x30, 0x35, 0x34, 0x62, 0x30, 0x65, 0x36, 0x39, 0x30, 0x30, 0x30, 0x30,
        0x34, 0x31, 0x65, 0x64, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x66, 0x35, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x31, 0x34, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x39, 0x36, 0x39, 0x31, 0x64, 0x66, 0x65, 0x35, 0x38,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x30, 0x31, 0x32, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x61, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x30, 0x69, 0x6e, 0x69, 0x74, 0x72, 0x61, 0x6d, 0x66, 0x73, 0x00, 0x30, 0x37, 0x30, 0x37, 0x30, 0x31,
        0x30, 0x35, 0x34, 0x62, 0x30, 0x65, 0x36, 0x66, 0x30, 0x30, 0x30, 0x30, 0x34, 0x31, 0x65, 0x64, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x31, 0x66, 0x35, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x34, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x32, 0x36, 0x39, 0x31, 0x64, 0x66, 0x65, 0x35, 0x38, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x32,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x66, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x69, 0x6e, 0x69, 0x74,
        0x72, 0x61, 0x6d, 0x66, 0x73, 0x2f, 0x70, 0x72, 0x6f, 0x63, 0x00, 0x00, 0x00, 0x00, 0x30, 0x37, 0x30, 0x37,
        0x30, 0x31, 0x30, 0x35, 0x34, 0x62, 0x30, 0x65, 0x36, 0x65, 0x30, 0x30, 0x30, 0x30, 0x34, 0x31, 0x65, 0x64,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x66, 0x35, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x34, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x32, 0x36, 0x39, 0x31, 0x64, 0x66, 0x65, 0x35, 0x38, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x31, 0x32, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x66, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x69, 0x6e,
        0x69, 0x74, 0x72, 0x61, 0x6d, 0x66, 0x73, 0x2f, 0x68, 0x6f, 0x6d, 0x65, 0x00, 0x00, 0x00, 0x00, 0x30, 0x37,
        0x30, 0x37, 0x30, 0x31, 0x30, 0x35, 0x34, 0x62, 0x30, 0x65, 0x36, 0x62, 0x30, 0x30, 0x30, 0x30, 0x34, 0x31,
        0x65, 0x64, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x66, 0x35, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x34,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x32, 0x36, 0x39, 0x31, 0x64, 0x66, 0x65, 0x35, 0x38, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x30, 0x31, 0x32, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x66, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x69, 0x6e, 0x69, 0x74, 0x72, 0x61, 0x6d, 0x66, 0x73, 0x2f, 0x62, 0x6f, 0x6f, 0x74, 0x00, 0x00, 0x00, 0x00,
        0x30, 0x37, 0x30, 0x37, 0x30, 0x31, 0x30, 0x35, 0x34, 0x62, 0x30, 0x65, 0x36, 0x61, 0x30, 0x30, 0x30, 0x30,
        0x34, 0x31, 0x65, 0x64, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x66, 0x35, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x31, 0x34, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x34, 0x36, 0x39, 0x31, 0x64, 0x66, 0x65, 0x35, 0x38,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x30, 0x31, 0x32, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x65, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x30, 0x69, 0x6e, 0x69, 0x74, 0x72, 0x61, 0x6d, 0x66, 0x73, 0x2f, 0x62, 0x69, 0x6e, 0x00, 0x30, 0x37,
        0x30, 0x37, 0x30, 0x31, 0x30, 0x35, 0x34, 0x62, 0x30, 0x65, 0x37, 0x31, 0x30, 0x30, 0x30, 0x30, 0x38, 0x31,
        0x65, 0x64, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x66, 0x35, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x34,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x36, 0x39, 0x31, 0x64, 0x66, 0x65, 0x35, 0x38, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x62, 0x61, 0x34, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x30, 0x31, 0x32, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x32, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x69, 0x6e, 0x69, 0x74, 0x72, 0x61, 0x6d, 0x66, 0x73, 0x2f, 0x62, 0x69, 0x6e, 0x2f, 0x67, 0x73, 0x68, 0x00,
        0x80, 0xb5, 0xad, 0xf5, 0x12, 0x7d, 0x00, 0xaf, 0xe8, 0x4b, 0x7b, 0x44, 0x18, 0x46, 0x00, 0xf0, 0x9f, 0xfa,
        0x3b, 0x1d, 0x4f, 0xf4, 0x80, 0x72, 0x19, 0x46, 0x00, 0x20, 0x00, 0xf0, 0x1f, 0xfa, 0x03, 0x46, 0x00, 0x2b,
        0x40, 0xf3, 0xbe, 0x81, 0x3b, 0x1d, 0xe1, 0x4a, 0x7a, 0x44, 0x11, 0x46, 0x18, 0x46, 0x00, 0xf0, 0x9f, 0xfa,
        0x02, 0x46, 0x07, 0xf5, 0x12, 0x73, 0xa3, 0xf5, 0x11, 0x73, 0x00, 0x21, 0x99, 0x54, 0x3b, 0x1d, 0xdb, 0x4a,
        0x7a, 0x44, 0x11, 0x46, 0x18, 0x46, 0x00, 0xf0, 0xfb, 0xfa, 0xc7, 0xf8, 0x44, 0x02, 0xd8, 0x4b, 0x7b, 0x44,
        0x19, 0x46, 0xd7, 0xf8, 0x44, 0x02, 0x00, 0xf0, 0x60, 0xfb, 0x03, 0x46, 0x00, 0x2b, 0x09, 0xd0, 0xd4, 0x4b,
        0x7b, 0x44, 0x19, 0x46, 0xd7, 0xf8, 0x44, 0x02, 0x00, 0xf0, 0x56, 0xfb, 0x03, 0x46, 0x00, 0x2b, 0x05, 0xd1,
        0xd0, 0x4b, 0x7b, 0x44, 0x18, 0x46, 0x00, 0xf0, 0x64, 0xfa, 0x8f, 0xe1, 0xce, 0x4b, 0x7b, 0x44, 0x19, 0x46,
        0xd7, 0xf8, 0x44, 0x02, 0x00, 0xf0, 0x46, 0xfb, 0x03, 0x46, 0x00, 0x2b, 0x09, 0xd0, 0xca, 0x4b, 0x7b, 0x44,
        0x19, 0x46, 0xd7, 0xf8, 0x44, 0x02, 0x00, 0xf0, 0x3c, 0xfb, 0x03, 0x46, 0x00, 0x2b, 0x54, 0xd1, 0xc6, 0x4b,
        0x7b, 0x44, 0x19, 0x46, 0x00, 0x20, 0x00, 0xf0, 0xc5, 0xfa, 0xc7, 0xf8, 0x18, 0x02, 0x00, 0x22, 0x4f, 0xf4,
        0x80, 0x31, 0xd7, 0xf8, 0x18, 0x02, 0x00, 0xf0, 0xd6, 0xf9, 0xc7, 0xf8, 0x14, 0x02, 0xd7, 0xf8, 0x14, 0x32,
        0x00, 0x2b, 0x05, 0xda, 0xbc, 0x4b, 0x7b, 0x44, 0x18, 0x46, 0x00, 0xf0, 0x35, 0xfa, 0x8f, 0xe7, 0x07, 0xf5,
        0x82, 0x73, 0x80, 0x22, 0x19, 0x46, 0xd7, 0xf8, 0x14, 0x02, 0x00, 0xf0, 0xb3, 0xf9, 0x4f, 0xf0, 0xff, 0x33,
        0xc7, 0xf8, 0x10, 0x32, 0x4f, 0xf0, 0xff, 0x33, 0xc7, 0xf8, 0x0c, 0x32, 0xb2, 0x4b, 0x7b, 0x44, 0x18, 0x46,
        0x00, 0xf0, 0x1f, 0xfa, 0x07, 0xf5, 0x01, 0x73, 0x0a, 0x22, 0x19, 0x46, 0xd7, 0xf8, 0x0c, 0x02, 0x00, 0xf0,
        0x34, 0xfb, 0x07, 0xf5, 0x01, 0x73, 0x18, 0x46, 0x00, 0xf0, 0x12, 0xfa, 0xaa, 0x4b, 0x7b, 0x44, 0x18, 0x46,
        0x00, 0xf0, 0x0d, 0xfa, 0x07, 0xf5, 0x01, 0x73, 0x0a, 0x22, 0x19, 0x46, 0xd7, 0xf8, 0x10, 0x02, 0x00, 0xf0,
        0x22, 0xfb, 0x07, 0xf5, 0x01, 0x73, 0x18, 0x46, 0x00, 0xf0, 0x00, 0xfa, 0xa2, 0x4b, 0x7b, 0x44, 0x18, 0x46,
        0x00, 0xf0, 0xfb, 0xf9, 0x26, 0xe1, 0xa0, 0x4b, 0x7b, 0x44, 0x19, 0x46, 0xd7, 0xf8, 0x44, 0x02, 0x00, 0xf0,
        0xdd, 0xfa, 0x03, 0x46, 0x00, 0x2b, 0x09, 0xd0, 0x9c, 0x4b, 0x7b, 0x44, 0x19, 0x46, 0xd7, 0xf8, 0x44, 0x02,
        0x00, 0xf0, 0xd3, 0xfa, 0x03, 0x46, 0x00, 0x2b, 0x05, 0xd1, 0x98, 0x4b, 0x7b, 0x44, 0x18, 0x46, 0x00, 0xf0,
        0xe1, 0xf9, 0x0c, 0xe1, 0x96, 0x4b, 0x7b, 0x44, 0x19, 0x46, 0xd7, 0xf8, 0x44, 0x02, 0x00, 0xf0, 0xc3, 0xfa,
        0x03, 0x46, 0x00, 0x2b, 0x09, 0xd0, 0x92, 0x4b, 0x7b, 0x44, 0x19, 0x46, 0xd7, 0xf8, 0x44, 0x02, 0x00, 0xf0,
        0xb9, 0xfa, 0x03, 0x46, 0x00, 0x2b, 0x05, 0xd1, 0x8e, 0x4b, 0x7b, 0x44, 0x18, 0x46, 0x00, 0xf0, 0xc7, 0xf9,
        0xf2, 0xe0, 0x8c, 0x4b, 0x7b, 0x44, 0x19, 0x46, 0xd7, 0xf8, 0x44, 0x02, 0x00, 0xf0, 0xa9, 0xfa, 0x03, 0x46,
        0x00, 0x2b, 0x09, 0xd0, 0x88, 0x4b, 0x7b, 0x44, 0x19, 0x46, 0xd7, 0xf8, 0x44, 0x02, 0x00, 0xf0, 0x9f, 0xfa,
        0x03, 0x46, 0x00, 0x2b, 0x41, 0xd1, 0x84, 0x4b, 0x7b, 0x44, 0x19, 0x46, 0x00, 0x20, 0x00, 0xf0, 0x28, 0xfa,
        0xc7, 0xf8, 0x24, 0x02, 0x81, 0x4b, 0x7b, 0x44, 0x19, 0x46, 0x00, 0x20, 0x00, 0xf0, 0x20, 0xfa, 0xc7, 0xf8,
        0x20, 0x02, 0xd7, 0xf8, 0x24, 0x32, 0x00, 0x2b, 0x00, 0xf0, 0xc9, 0x80, 0xd7, 0xf8, 0x20, 0x32, 0x00, 0x2b,
        0x04, 0xd1, 0xd7, 0xf8, 0x24, 0x02, 0x00, 0xf0, 0x95, 0xf9, 0xc0, 0xe0, 0x00, 0x22, 0x01, 0x21, 0xd7, 0xf8,
        0x20, 0x02, 0x00, 0xf0, 0x24, 0xf9, 0xc7, 0xf8, 0x1c, 0x02, 0xd7, 0xf8, 0x1c, 0x32, 0x00, 0x2b, 0x05, 0xda,
        0x71, 0x4b, 0x7b, 0x44, 0x18, 0x46, 0x00, 0xf0, 0x83, 0xf9, 0xae, 0xe0, 0xd7, 0xf8, 0x24, 0x02, 0x00, 0xf0,
        0x68, 0xf9, 0x03, 0x46, 0x01, 0x33, 0x1a, 0x46, 0xd7, 0xf8, 0x24, 0x12, 0xd7, 0xf8, 0x1c, 0x02, 0x00, 0xf0,
        0xed, 0xf8, 0xd7, 0xf8, 0x1c, 0x02, 0x00, 0xf0, 0x16, 0xf9, 0x9c, 0xe0, 0x66, 0x4b, 0x7b, 0x44, 0x19, 0x46,
        0xd7, 0xf8, 0x44, 0x02, 0x00, 0xf0, 0x53, 0xfa, 0x03, 0x46, 0x00, 0x2b, 0x4b, 0xd1, 0x62, 0x4b, 0x7b, 0x44,
        0x19, 0x46, 0x00, 0x20, 0x00, 0xf0, 0xdc, 0xf9, 0xc7, 0xf8, 0x30, 0x02, 0xd7, 0xf8, 0x30, 0x32, 0x00, 0x2b,
        0x02, 0xd0, 0xd7, 0xf8, 0x30, 0x32, 0x01, 0xe0, 0x5c, 0x4b, 0x7b, 0x44, 0xc7, 0xf8, 0x2c, 0x32, 0x00, 0x22,
        0x4f, 0xf4, 0x00, 0x11, 0xd7, 0xf8, 0x2c, 0x02, 0x00, 0xf0, 0xe2, 0xf8, 0xc7, 0xf8, 0x28, 0x02, 0xd7, 0xf8,
        0x28, 0x32, 0x00, 0x2b, 0x1a, 0xda, 0x54, 0x4b, 0x7b, 0x44, 0x18, 0x46, 0x00, 0xf0, 0x41, 0xf9, 0x9b, 0xe6,
        0x07, 0xf5, 0x82, 0x73, 0x18, 0x46, 0x00, 0xf0, 0x3b, 0xf9, 0x50, 0x4b, 0x7b, 0x44, 0x18, 0x46, 0x00, 0xf0,
        0x36, 0xf9, 0x07, 0xf5, 0x82, 0x73, 0x08, 0x33, 0x18, 0x46, 0x00, 0xf0, 0x30, 0xf9, 0x4b, 0x4b, 0x7b, 0x44,
        0x18, 0x46, 0x00, 0xf0, 0x2b, 0xf9, 0x07, 0xf5, 0x82, 0x73, 0x19, 0x46, 0xd7, 0xf8, 0x28, 0x02, 0x00, 0xf0,
        0xd6, 0xf8, 0x03, 0x46, 0x01, 0x2b, 0xe0, 0xd0, 0x00, 0x22, 0x00, 0x21, 0xd7, 0xf8, 0x28, 0x02, 0x00, 0xf0,
        0xe8, 0xf8, 0x75, 0xe6, 0x41, 0x4b, 0x7b, 0x44, 0x19, 0x46, 0xd7, 0xf8, 0x44, 0x02, 0x00, 0xf0, 0xfd, 0xf9,
        0x03, 0x46, 0x00, 0x2b, 0x19, 0xd1, 0x3d, 0x4b, 0x7b, 0x44, 0x19, 0x46, 0x00, 0x20, 0x00, 0xf0, 0x86, 0xf9,
        0xc7, 0xf8, 0x38, 0x02, 0xd7, 0xf8, 0x38, 0x02, 0x00, 0xf0, 0xc4, 0xf8, 0xc7, 0xf8, 0x34, 0x02, 0xd7, 0xf8,
        0x34, 0x32, 0xb3, 0xf1, 0xff, 0x3f, 0x7f, 0xf4, 0x58, 0xae, 0x34, 0x4b, 0x7b, 0x44, 0x18, 0x46, 0x00, 0xf0,
        0xf7, 0xf8, 0x51, 0xe6, 0x32, 0x4b, 0x7b, 0x44, 0x19, 0x46, 0xd7, 0xf8, 0x44, 0x02, 0x00, 0xf0, 0xd9, 0xf9,
        0x03, 0x46, 0x00, 0x2b, 0x7f, 0xf4, 0x47, 0xae, 0x07, 0xf5, 0x82, 0x73, 0xc7, 0xf8, 0x40, 0x32, 0x40, 0x21,
        0xd7, 0xf8, 0x40, 0x02, 0x00, 0xf0, 0xbe, 0xf8, 0xc7, 0xf8, 0x3c, 0x02, 0xd7, 0xf8, 0x3c, 0x02, 0x00, 0xf0,
        0xdc, 0xf8, 0x26, 0x4b, 0x7b, 0x44, 0x18, 0x46, 0x00, 0xf0, 0xd7, 0xf8, 0x31, 0xe6, 0x00, 0xbf, 0x2f, 0xe6,
        0x00, 0xbf, 0x2d, 0xe6, 0x1e, 0x08, 0x00, 0x00, 0x00, 0x08, 0x00, 0x00, 0xe8, 0x07, 0x00, 0x00, 0xdc, 0x07,
        0x00, 0x00, 0xd0, 0x07, 0x00, 0x00, 0xc0, 0x07, 0x00, 0x00, 0x10, 0x0a, 0x00, 0x00, 0x00, 0x0a, 0x00, 0x00,
        0x7c, 0x07, 0x00, 0x00, 0xc6, 0x09, 0x00, 0x00, 0xb2, 0x09, 0x00, 0x00, 0xba, 0x09, 0x00, 0x00, 0xda, 0x06,
        0x00, 0x00, 0x9e, 0x09, 0x00, 0x00, 0x92, 0x09, 0x00, 0x00, 0x82, 0x09, 0x00, 0x00, 0x7a, 0x09, 0x00, 0x00,
        0x6e, 0x09, 0x00, 0x00, 0x5e, 0x09, 0x00, 0x00, 0x96, 0x09, 0x00, 0x00, 0x8a, 0x09, 0x00, 0x00, 0x7a, 0x09,
        0x00, 0x00, 0x6e, 0x09, 0x00, 0x00, 0x2e, 0x09, 0x00, 0x00, 0x0e, 0x09, 0x00, 0x00, 0xaa, 0x05, 0x00, 0x00,
        0xc8, 0x08, 0x00, 0x00, 0xbe, 0x08, 0x00, 0x00, 0x54, 0x05, 0x00, 0x00, 0x3a, 0x05, 0x00, 0x00, 0x76, 0x08,
        0x00, 0x00, 0xfe, 0x04, 0x00, 0x00, 0x16, 0x08, 0x00, 0x00, 0x32, 0x08, 0x00, 0x00, 0x92, 0x04, 0x00, 0x00,
        0xff, 0xf7, 0xe2, 0xbd, 0x01, 0xdf, 0x00, 0xbf, 0x80, 0xb4, 0x87, 0xb0, 0x00, 0xaf, 0xf8, 0x60, 0xb9, 0x60,
        0x7a, 0x60, 0x04, 0xdf, 0x03, 0x46, 0x7b, 0x61, 0x7b, 0x69, 0x18, 0x46, 0x1c, 0x37, 0xbd, 0x46, 0x80, 0xbc,
        0x70, 0x47, 0x80, 0xb4, 0x87, 0xb0, 0x00, 0xaf, 0xf8, 0x60, 0xb9, 0x60, 0x7a, 0x60, 0x03, 0xdf, 0x03, 0x46,
        0x7b, 0x61, 0x7b, 0x69, 0x18, 0x46, 0x1c, 0x37, 0xbd, 0x46, 0x80, 0xbc, 0x70, 0x47, 0x80, 0xb4, 0x87, 0xb0,
        0x00, 0xaf, 0xf8, 0x60, 0xb9, 0x60, 0x7a, 0x60, 0x05, 0xdf, 0x03, 0x46, 0x7b, 0x61, 0x7b, 0x69, 0x18, 0x46,
        0x1c, 0x37, 0xbd, 0x46, 0x80, 0xbc, 0x70, 0x47, 0x80, 0xb4, 0x85, 0xb0, 0x00, 0xaf, 0x78, 0x60, 0x06, 0xdf,
        0x03, 0x46, 0xfb, 0x60, 0xfb, 0x68, 0x18, 0x46, 0x14, 0x37, 0xbd, 0x46, 0x80, 0xbc, 0x70, 0x47, 0x80, 0xb4,
        0x85, 0xb0, 0x00, 0xaf, 0x78, 0x60, 0x39, 0x60, 0x08, 0xdf, 0x03, 0x46, 0xfb, 0x60, 0xfb, 0x68, 0x18, 0x46,
        0x14, 0x37, 0xbd, 0x46, 0x80, 0xbc, 0x70, 0x47, 0x80, 0xb4, 0x85, 0xb0, 0x00, 0xaf, 0x78, 0x60, 0x09, 0xdf,
        0x03, 0x46, 0xfb, 0x60, 0xfb, 0x68, 0x18, 0x46, 0x14, 0x37, 0xbd, 0x46, 0x80, 0xbc, 0x70, 0x47, 0x80, 0xb4,
        0x87, 0xb0, 0x00, 0xaf, 0xf8, 0x60, 0xb9, 0x60, 0x7a, 0x60, 0x0a, 0xdf, 0x03, 0x46, 0x7b, 0x61, 0x7b, 0x69,
        0x18, 0x46, 0x1c, 0x37, 0xbd, 0x46, 0x80, 0xbc, 0x70, 0x47, 0x80, 0xb4, 0x85, 0xb0, 0x00, 0xaf, 0x78, 0x60,
        0x39, 0x60, 0x0c, 0xdf, 0x03, 0x46, 0xfb, 0x60, 0xfb, 0x68, 0x18, 0x46, 0x14, 0x37, 0xbd, 0x46, 0x80, 0xbc,
        0x70, 0x47, 0x80, 0xb4, 0x85, 0xb0, 0x00, 0xaf, 0x78, 0x60, 0x00, 0x23, 0xfb, 0x60, 0x02, 0xe0, 0xfb, 0x68,
        0x01, 0x33, 0xfb, 0x60, 0xfb, 0x68, 0x7a, 0x68, 0x13, 0x44, 0x1b, 0x78, 0x00, 0x2b, 0xf6, 0xd1, 0xfb, 0x68,
        0x18, 0x46, 0x14, 0x37, 0xbd, 0x46, 0x80, 0xbc, 0x70, 0x47, 0x80, 0xb5, 0x84, 0xb0, 0x00, 0xaf, 0x78, 0x60,
        0x78, 0x68, 0xff, 0xf7, 0xe3, 0xff, 0xf8, 0x60, 0xfa, 0x68, 0x79, 0x68, 0x01, 0x20, 0xff, 0xf7, 0x6b, 0xff,
        0x03, 0x46, 0x18, 0x46, 0x10, 0x37, 0xbd, 0x46, 0x80, 0xbd, 0x80, 0xb5, 0x86, 0xb0, 0x00, 0xaf, 0x78, 0x60,
        0x39, 0x60, 0x38, 0x68, 0xff, 0xf7, 0xd0, 0xff, 0xf8, 0x60, 0x00, 0x23, 0x7b, 0x61, 0x18, 0xe0, 0x00, 0x23,
        0x3b, 0x61, 0x0e, 0xe0, 0x7b, 0x69, 0x7a, 0x68, 0x13, 0x44, 0x1a, 0x78, 0x3b, 0x69, 0x39, 0x68, 0x0b, 0x44,
        0x1b, 0x78, 0x9a, 0x42, 0x01, 0xd1, 0x7b, 0x69, 0x10, 0xe0, 0x3b, 0x69, 0x01, 0x33, 0x3b, 0x61, 0x3a, 0x69,
        0xfb, 0x68, 0x9a, 0x42, 0xec, 0xdb, 0x7b, 0x69, 0x01, 0x33, 0x7b, 0x61, 0x7b, 0x69, 0x7a, 0x68, 0x13, 0x44,
        0x1b, 0x78, 0x00, 0x2b, 0xe0, 0xd1, 0x7b, 0x69, 0x18, 0x46, 0x18, 0x37, 0xbd, 0x46, 0x80, 0xbd, 0x80, 0xb5,
        0x86, 0xb0, 0x00, 0xaf, 0x78, 0x60, 0x39, 0x60, 0x38, 0x68, 0xff, 0xf7, 0xa0, 0xff, 0xb8, 0x60, 0x00, 0x23,
        0x7b, 0x61, 0x22, 0xe0, 0x00, 0x23, 0xfb, 0x74, 0x00, 0x23, 0xfb, 0x60, 0x0e, 0xe0, 0x7b, 0x69, 0x7a, 0x68,
        0x13, 0x44, 0x1a, 0x78, 0xfb, 0x68, 0x39, 0x68, 0x0b, 0x44, 0x1b, 0x78, 0x9a, 0x42, 0x01, 0xd1, 0x01, 0x23,
        0xfb, 0x74, 0xfb, 0x68, 0x01, 0x33, 0xfb, 0x60, 0xfa, 0x68, 0xbb, 0x68, 0x9a, 0x42, 0xec, 0xdb, 0xfb, 0x7c,
        0x83, 0xf0, 0x01, 0x03, 0xdb, 0xb2, 0x00, 0x2b, 0x01, 0xd0, 0x7b, 0x69, 0x09, 0xe0, 0x7b, 0x69, 0x01, 0x33,
        0x7b, 0x61, 0x7b, 0x69, 0x7a, 0x68, 0x13, 0x44, 0x1b, 0x78, 0x00, 0x2b, 0xd6, 0xd1, 0x7b, 0x69, 0x18, 0x46,
        0x18, 0x37, 0xbd, 0x46, 0x80, 0xbd, 0x80, 0xb5, 0x84, 0xb0, 0x00, 0xaf, 0x78, 0x60, 0x39, 0x60, 0x7b, 0x68,
        0x00, 0x2b, 0x03, 0xd0, 0x25, 0x4b, 0x7b, 0x44, 0x7a, 0x68, 0x1a, 0x60, 0x24, 0x4b, 0x7b, 0x44, 0x1b, 0x68,
        0x00, 0x2b, 0x05, 0xd0, 0x23, 0x4b, 0x7b, 0x44, 0x1b, 0x68, 0x1b, 0x78, 0x00, 0x2b, 0x01, 0xd1, 0x00, 0x23,
        0x35, 0xe0, 0x20, 0x4b, 0x7b, 0x44, 0x1a, 0x68, 0x1f, 0x4b, 0x7b, 0x44, 0x1a, 0x60, 0x1f, 0x4b, 0x7b, 0x44,
        0x1b, 0x68, 0x39, 0x68, 0x18, 0x46, 0xff, 0xf7, 0x70, 0xff, 0x02, 0x46, 0x1c, 0x4b, 0x7b, 0x44, 0x1b, 0x68,
        0x1a, 0x44, 0x1b, 0x4b, 0x7b, 0x44, 0x1a, 0x60, 0x1a, 0x4b, 0x7b, 0x44, 0x1b, 0x68, 0x39, 0x68, 0x18, 0x46,
        0xff, 0xf7, 0x91, 0xff, 0xb8, 0x60, 0x00, 0x23, 0xfb, 0x60, 0x0e, 0xe0, 0x16, 0x4b, 0x7b, 0x44, 0x1b, 0x68,
        0x00, 0x22, 0x1a, 0x70, 0x14, 0x4b, 0x7b, 0x44, 0x1b, 0x68, 0x5a, 0x1c, 0x13, 0x4b, 0x7b, 0x44, 0x1a, 0x60,
        0xfb, 0x68, 0x01, 0x33, 0xfb, 0x60, 0xfa, 0x68, 0xbb, 0x68, 0x9a, 0x42, 0xec, 0xdb, 0x0f, 0x4b, 0x7b, 0x44,
        0x1b, 0x68, 0x18, 0x46, 0x10, 0x37, 0xbd, 0x46, 0x80, 0xbd, 0x00, 0xbf, 0x46, 0x15, 0x00, 0x00, 0x3e, 0x15,
        0x00, 0x00, 0x34, 0x15, 0x00, 0x00, 0x24, 0x15, 0x00, 0x00, 0x22, 0x15, 0x00, 0x00, 0x18, 0x15, 0x00, 0x00,
        0x08, 0x15, 0x00, 0x00, 0x00, 0x15, 0x00, 0x00, 0xfa, 0x14, 0x00, 0x00, 0xe4, 0x14, 0x00, 0x00, 0xda, 0x14,
        0x00, 0x00, 0xd2, 0x14, 0x00, 0x00, 0xc2, 0x14, 0x00, 0x00, 0x80, 0xb4, 0x85, 0xb0, 0x00, 0xaf, 0x78, 0x60,
        0x39, 0x60, 0x00, 0x23, 0xfb, 0x60, 0x00, 0xbf, 0xfb, 0x68, 0x7a, 0x68, 0x13, 0x44, 0x1b, 0x78, 0x00, 0x2b,
        0x1e, 0xd0, 0x17, 0xe0, 0xfb, 0x68, 0x7a, 0x68, 0x13, 0x44, 0x1a, 0x78, 0xfb, 0x68, 0x39, 0x68, 0x0b, 0x44,
        0x1b, 0x78, 0x9a, 0x42, 0x02, 0xd1, 0xfb, 0x68, 0x01, 0x33, 0xfb, 0x60, 0xfb, 0x68, 0x7a, 0x68, 0x13, 0x44,
        0x1b, 0x78, 0x19, 0x46, 0xfb, 0x68, 0x3a, 0x68, 0x13, 0x44, 0x1b, 0x78, 0xcb, 0x1a, 0x06, 0xe0, 0xfb, 0x68,
        0x3a, 0x68, 0x13, 0x44, 0x1b, 0x78, 0x00, 0x2b, 0xe1, 0xd1, 0x00, 0x23, 0x18, 0x46, 0x14, 0x37, 0xbd, 0x46,
        0x80, 0xbc, 0x70, 0x47, 0x80, 0xb4, 0x89, 0xb0, 0x00, 0xaf, 0xf8, 0x60, 0xb9, 0x60, 0x7a, 0x60, 0xfb, 0x68,
        0x00, 0x2b, 0x04, 0xd1, 0xbb, 0x68, 0x30, 0x22, 0x1a, 0x70, 0xbb, 0x68, 0x3a, 0xe0, 0x00, 0x23, 0xfb, 0x61,
        0xfb, 0x68, 0xbb, 0x61, 0x07, 0xe0, 0xfb, 0x69, 0x01, 0x33, 0xfb, 0x61, 0xba, 0x69, 0x7b, 0x68, 0x92, 0xfb,
        0xf3, 0xf3, 0xbb, 0x61, 0xbb, 0x69, 0x00, 0x2b, 0xf4, 0xd1, 0x25, 0xe0, 0xfb, 0x68, 0x7a, 0x68, 0x93, 0xfb,
        0xf2, 0xf2, 0x79, 0x68, 0x01, 0xfb, 0x02, 0xf2, 0x9b, 0x1a, 0xfb, 0x75, 0xfb, 0x7d, 0x09, 0x2b, 0x09, 0xd9,
        0xfb, 0x69, 0x01, 0x3b, 0xba, 0x68, 0x13, 0x44, 0xfa, 0x7d, 0xc2, 0xf1, 0x4b, 0x02, 0xd2, 0xb2, 0x1a, 0x70,
        0x07, 0xe0, 0xfb, 0x69, 0x01, 0x3b, 0xba, 0x68, 0x13, 0x44, 0xfa, 0x7d, 0x30, 0x32, 0xd2, 0xb2, 0x1a, 0x70,
        0xfa, 0x68, 0x7b, 0x68, 0x92, 0xfb, 0xf3, 0xf3, 0xfb, 0x60, 0xfb, 0x69, 0x01, 0x3b, 0xfb, 0x61, 0xfb, 0x68,
        0x00, 0x2b, 0xd6, 0xd1, 0xbb, 0x68, 0x18, 0x46, 0x24, 0x37, 0xbd, 0x46, 0x80, 0xbc, 0x70, 0x47, 0x00, 0xbf,
        0x20, 0x00, 0x00, 0x00, 0x20, 0x3e, 0x20, 0x00, 0x0a, 0x00, 0x00, 0x00, 0x20, 0x00, 0x00, 0x00, 0x68, 0x65,
        0x6c, 0x70, 0x00, 0x00, 0x00, 0x00, 0x68, 0x00, 0x00, 0x00, 0x54, 0x65, 0x6d, 0x70, 0x6f, 0x72, 0x61, 0x72,
        0x69, 0x6c, 0x79, 0x20, 0x61, 0x76, 0x61, 0x69, 0x6c, 0x61, 0x62, 0x6c, 0x65, 0x20, 0x63, 0x6f, 0x6d, 0x6d,
        0x61, 0x6e, 0x64, 0x73, 0x3a, 0x0a, 0x09, 0x20, 0x20, 0x28, 0x68, 0x29, 0x65, 0x6c, 0x70, 0x20, 0x2d, 0x20,
        0x70, 0x72, 0x69, 0x6e, 0x74, 0x73, 0x20, 0x74, 0x68, 0x69, 0x73, 0x20, 0x68, 0x65, 0x6c, 0x70, 0x20, 0x73,
        0x63, 0x72, 0x65, 0x65, 0x6e, 0x0a, 0x09, 0x20, 0x20, 0x20, 0x28, 0x72, 0x29, 0x75, 0x6e, 0x20, 0x2d, 0x20,
        0x72, 0x75, 0x6e, 0x73, 0x20, 0x73, 0x70, 0x65, 0x63, 0x69, 0x66, 0x69, 0x65, 0x64, 0x20, 0x61, 0x70, 0x70,
        0x2c, 0x20, 0x69, 0x66, 0x20, 0x6e, 0x6f, 0x20, 0x61, 0x72, 0x67, 0x75, 0x6d, 0x65, 0x6e, 0x74, 0x20, 0x69,
        0x73, 0x20, 0x70, 0x72, 0x6f, 0x76, 0x69, 0x64, 0x65, 0x64, 0x20, 0x72, 0x75, 0x6e, 0x73, 0x20, 0x70, 0x72,
        0x6f, 0x63, 0x32, 0x0a, 0x09, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x28, 0x73,
        0x74, 0x61, 0x6e, 0x64, 0x61, 0x72, 0x64, 0x20, 0x69, 0x6e, 0x70, 0x75, 0x74, 0x20, 0x74, 0x65, 0x73, 0x74,
        0x29, 0x2e, 0x20, 0x50, 0x72, 0x6f, 0x63, 0x31, 0x20, 0x69, 0x73, 0x20, 0x61, 0x6c, 0x72, 0x65, 0x61, 0x64,
        0x79, 0x20, 0x72, 0x75, 0x6e, 0x6e, 0x69, 0x6e, 0x67, 0x20, 0x28, 0x64, 0x69, 0x6f, 0x64, 0x65, 0x29, 0x0a,
        0x09, 0x20, 0x20, 0x28, 0x6b, 0x29, 0x69, 0x6c, 0x6c, 0x20, 0x2d, 0x20, 0x6b, 0x69, 0x6c, 0x6c, 0x73, 0x20,
        0x70, 0x72, 0x6f, 0x63, 0x31, 0x20, 0x28, 0x64, 0x69, 0x6f, 0x64, 0x65, 0x29, 0x0a, 0x09, 0x28, 0x6d, 0x29,
        0x6f, 0x72, 0x63, 0x69, 0x6b, 0x20, 0x2d, 0x20, 0x70, 0x72, 0x69, 0x6e, 0x74, 0x73, 0x20, 0x61, 0x20, 0x63,
        0x6f, 0x6c, 0x6f, 0x72, 0x66, 0x75, 0x6c, 0x20, 0x6d, 0x65, 0x73, 0x73, 0x61, 0x67, 0x65, 0x0a, 0x09, 0x20,
        0x20, 0x20, 0x20, 0x20, 0x20, 0x20, 0x2d, 0x2d, 0x2d, 0x2d, 0x2d, 0x0a, 0x09, 0x20, 0x20, 0x20, 0x20, 0x20,
        0x20, 0x6c, 0x73, 0x20, 0x2d, 0x20, 0x6c, 0x69, 0x73, 0x74, 0x73, 0x20, 0x63, 0x75, 0x72, 0x72, 0x65, 0x6e,
        0x74, 0x20, 0x64, 0x69, 0x72, 0x65, 0x63, 0x74, 0x6f, 0x72, 0x79, 0x0a, 0x09, 0x20, 0x20, 0x20, 0x6d, 0x6b,
        0x64, 0x69, 0x72, 0x20, 0x2d, 0x20, 0x63, 0x72, 0x65, 0x61, 0x74, 0x65, 0x73, 0x20, 0x61, 0x20, 0x64, 0x69,
        0x72, 0x65, 0x63, 0x74, 0x6f, 0x72, 0x79, 0x20, 0x75, 0x6e, 0x64, 0x65, 0x72, 0x20, 0x73, 0x70, 0x65, 0x63,
        0x69, 0x66, 0x69, 0x65, 0x64, 0x20, 0x70, 0x61, 0x74, 0x68, 0x0a, 0x09, 0x20, 0x20, 0x20, 0x74, 0x6f, 0x75,
        0x63, 0x68, 0x20, 0x2d, 0x20, 0x63, 0x72, 0x65, 0x61, 0x74, 0x65, 0x73, 0x20, 0x61, 0x20, 0x66, 0x69, 0x6c,
        0x65, 0x20, 0x75, 0x6e, 0x64, 0x65, 0x72, 0x20, 0x73, 0x70, 0x65, 0x63, 0x69, 0x66, 0x69, 0x65, 0x64, 0x20,
        0x70, 0x61, 0x74, 0x68, 0x0a, 0x09, 0x20, 0x20, 0x20, 0x20, 0x20, 0x63, 0x61, 0x74, 0x20, 0x2d, 0x20, 0x72,
        0x65, 0x61, 0x64, 0x73, 0x20, 0x66, 0x69, 0x6c, 0x65, 0x20, 0x63, 0x6f, 0x6e, 0x74, 0x65, 0x6e, 0x74, 0x73,
        0x0a, 0x09, 0x20, 0x20, 0x28, 0x65, 0x29, 0x63, 0x68, 0x6f, 0x20, 0x2d, 0x20, 0x77, 0x72, 0x69, 0x74, 0x65,
        0x73, 0x20, 0x74, 0x6f, 0x20, 0x73, 0x74, 0x61, 0x6e, 0x64, 0x61, 0x72, 0x64, 0x20, 0x69, 0x6e, 0x70, 0x75,
        0x74, 0x20, 0x6f, 0x72, 0x20, 0x72, 0x65, 0x64, 0x69, 0x72, 0x65, 0x63, 0x74, 0x73, 0x20, 0x74, 0x6f, 0x20,
        0x61, 0x20, 0x66, 0x69, 0x6c, 0x65, 0x0a, 0x09, 0x20, 0x72, 0x61, 0x77, 0x65, 0x63, 0x68, 0x6f, 0x20, 0x2d,
        0x20, 0x77, 0x72, 0x69, 0x74, 0x65, 0x73, 0x20, 0x63, 0x6f, 0x6e, 0x76, 0x65, 0x72, 0x74, 0x65, 0x64, 0x20,
        0x68, 0x65, 0x78, 0x61, 0x64, 0x65, 0x63, 0x69, 0x6d, 0x61, 0x6c, 0x20, 0x62, 0x79, 0x74, 0x65, 0x73, 0x20,
        0x74, 0x6f, 0x20, 0x73, 0x70, 0x65, 0x63, 0x69, 0x66, 0x69, 0x65, 0x64, 0x20, 0x66, 0x69, 0x6c, 0x65, 0x20,
        0x28, 0x6d, 0x61, 0x78, 0x20, 0x31, 0x32, 0x38, 0x20, 0x62, 0x79, 0x74, 0x65, 0x73, 0x29, 0x0a, 0x0a, 0x00,
        0x00, 0x00, 0x72, 0x75, 0x6e, 0x00, 0x72, 0x00, 0x00, 0x00, 0x45, 0x78, 0x65, 0x63, 0x75, 0x74, 0x61, 0x62,
        0x6c, 0x65, 0x20, 0x6e, 0x6f, 0x74, 0x20, 0x66, 0x6f, 0x75, 0x6e, 0x64, 0x2e, 0x0a, 0x00, 0x00, 0x0a, 0x1b,
        0x5b, 0x39, 0x36, 0x3b, 0x34, 0x30, 0x6d, 0x5b, 0x50, 0x41, 0x54, 0x45, 0x52, 0x20, 0x41, 0x44, 0x41, 0x4d,
        0x56, 0x53, 0x5d, 0x1b, 0x5b, 0x30, 0x6d, 0x20, 0x43, 0x68, 0x69, 0x6c, 0x64, 0x20, 0x70, 0x72, 0x6f, 0x63,
        0x65, 0x73, 0x73, 0x20, 0x00, 0x00, 0x65, 0x78, 0x69, 0x74, 0x65, 0x64, 0x20, 0x77, 0x69, 0x74, 0x68, 0x20,
        0x63, 0x6f, 0x64, 0x65, 0x3a, 0x20, 0x00, 0x00, 0x6b, 0x69, 0x6c, 0x6c, 0x00, 0x00, 0x00, 0x00, 0x6b, 0x00,
        0x00, 0x00, 0x4e, 0x2f, 0x61, 0x00, 0x6d, 0x6f, 0x72, 0x63, 0x69, 0x6b, 0x00, 0x00, 0x6d, 0x00, 0x00, 0x00,
        0x1b, 0x5b, 0x39, 0x35, 0x3b, 0x34, 0x30, 0x6d, 0x4d, 0x65, 0x69, 0x6e, 0x65, 0x20, 0x62, 0x65, 0x6c, 0x69,
        0x65, 0x62, 0x74, 0x65, 0x20, 0x4f, 0x6c, 0x67, 0x61, 0x20, 0x69, 0x73, 0x74, 0x20, 0x64, 0x69, 0x65, 0x20,
        0x73, 0x63, 0x68, 0xf6, 0x6e, 0x73, 0x74, 0x65, 0x20, 0x46, 0x72, 0x61, 0x75, 0x20, 0x61, 0x75, 0x66, 0x20,
        0x64, 0x65, 0x72, 0x20, 0x57, 0x65, 0x6c, 0x74, 0x0a, 0x1b, 0x5b, 0x30, 0x6d, 0x00, 0x65, 0x63, 0x68, 0x6f,
        0x00, 0x00, 0x00, 0x00, 0x65, 0x00, 0x00, 0x00, 0x3e, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x4e, 0x6f,
        0x20, 0x73, 0x75, 0x63, 0x68, 0x20, 0x66, 0x69, 0x6c, 0x65, 0x2e, 0x0a, 0x00, 0x00, 0x6c, 0x73, 0x00, 0x00,
        0x4e, 0x6f, 0x20, 0x73, 0x75, 0x63, 0x68, 0x20, 0x66, 0x69, 0x6c, 0x65, 0x2e, 0x00, 0x00, 0x00, 0x63, 0x64,
        0x00, 0x00, 0x70, 0x77, 0x64, 0x00, 0x20, 0x00, 0x00, 0x00, 0x30, 0x37, 0x30, 0x37, 0x30, 0x31, 0x30, 0x35,
        0x34, 0x62, 0x30, 0x65, 0x37, 0x37, 0x30, 0x30, 0x30, 0x30, 0x38, 0x31, 0x65, 0x64, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x31, 0x66, 0x35, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x34, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x31, 0x36, 0x39, 0x31, 0x64, 0x66, 0x65, 0x35, 0x38, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x38, 0x34,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x32, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x30, 0x31, 0x31, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x69, 0x6e, 0x69, 0x74, 0x72, 0x61,
        0x6d, 0x66, 0x73, 0x2f, 0x62, 0x69, 0x6e, 0x2f, 0x6c, 0x73, 0x00, 0x00, 0x80, 0xb5, 0x8e, 0xb0, 0x00, 0xaf,
        0x78, 0x60, 0x39, 0x60, 0x3b, 0x68, 0x5b, 0x68, 0x4f, 0xf4, 0x00, 0x11, 0x18, 0x46, 0x06, 0xdf, 0x78, 0x63,
        0x12, 0xe0, 0x07, 0xf1, 0x0c, 0x03, 0x08, 0x33, 0x08, 0xb4, 0x18, 0x46, 0x00, 0xf0, 0x24, 0xf8, 0x02, 0x46,
        0x4f, 0xf0, 0x01, 0x00, 0x02, 0xbc, 0x05, 0xdf, 0x4f, 0xf0, 0x01, 0x00, 0x0f, 0xf2, 0x4a, 0x01, 0x4f, 0xf0,
        0x01, 0x02, 0x05, 0xdf, 0x07, 0xf1, 0x0c, 0x03, 0x19, 0x46, 0x78, 0x6b, 0x09, 0xdf, 0x03, 0x46, 0x00, 0x2b,
        0xe4, 0xd1, 0x00, 0x23, 0x18, 0x46, 0x38, 0x37, 0xbd, 0x46, 0x4f, 0xf0, 0x00, 0x00, 0xbd, 0xe8, 0x80, 0x40,
        0x01, 0xdf, 0x00, 0xbf, 0xaf, 0xf3, 0x00, 0x80, 0xaf, 0xf3, 0x00, 0x80, 0xaf, 0xf3, 0x00, 0x80, 0x00, 0x21,
        0x02, 0x78, 0x00, 0x2a, 0x02, 0xd0, 0x01, 0x31, 0x01, 0x30, 0xf9, 0xe7, 0x08, 0x46, 0x70, 0x47, 0x0a, 0x00,
        0x30, 0x37, 0x30, 0x37, 0x30, 0x31, 0x30, 0x35, 0x34, 0x62, 0x30, 0x65, 0x37, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x34, 0x31, 0x65, 0x64, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x66, 0x35, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x31, 0x34, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x32, 0x36, 0x39, 0x31, 0x64, 0x66, 0x65, 0x35, 0x38,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x30, 0x31, 0x32, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x66, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x30, 0x69, 0x6e, 0x69, 0x74, 0x72, 0x61, 0x6d, 0x66, 0x73, 0x2f, 0x73, 0x62, 0x69, 0x6e, 0x00, 0x00,
        0x00, 0x00, 0x30, 0x37, 0x30, 0x37, 0x30, 0x31, 0x30, 0x35, 0x34, 0x62, 0x30, 0x65, 0x36, 0x64, 0x30, 0x30,
        0x30, 0x30, 0x34, 0x31, 0x65, 0x64, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x66, 0x35, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x30, 0x31, 0x34, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x32, 0x36, 0x39, 0x31, 0x64, 0x66, 0x65,
        0x35, 0x38, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x32, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x65, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x30, 0x69, 0x6e, 0x69, 0x74, 0x72, 0x61, 0x6d, 0x66, 0x73, 0x2f, 0x65, 0x74, 0x63, 0x00,
        0x30, 0x37, 0x30, 0x37, 0x30, 0x31, 0x30, 0x35, 0x34, 0x62, 0x30, 0x65, 0x36, 0x63, 0x30, 0x30, 0x30, 0x30,
        0x34, 0x31, 0x65, 0x64, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x66, 0x35, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x31, 0x34, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x32, 0x36, 0x39, 0x31, 0x64, 0x66, 0x65, 0x35, 0x38,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x30, 0x31, 0x32, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x65, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x30, 0x69, 0x6e, 0x69, 0x74, 0x72, 0x61, 0x6d, 0x66, 0x73, 0x2f, 0x64, 0x65, 0x76, 0x00, 0x30, 0x37,
        0x30, 0x37, 0x30, 0x31, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x31, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x62, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30, 0x30,
        0x54, 0x52, 0x41, 0x49, 0x4c, 0x45, 0x52, 0x21, 0x21, 0x21, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
        0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

void PATER_ADAMVS(int argc, char *argv[]) {
        signal(SIGINT, PATER_ADAMVS_SIGINT);
        printf("\n\x1b[96;40mPATER ADAMVS QUI EST IN PARADISO VOLVPTATIS SALVTAT SEQUENTES PROCESS FILIOS\x1b[0m\n");

        [[maybe_unused]] const int proc1_pid = spawnp(proc1, nullptr, nullptr, nullptr, nullptr);

        char *ptr = cpio_archive;
        while (1) {
                const struct cpio_newc_header *header = (struct cpio_newc_header *) ptr;

                if (memcmp(header->c_magic, "070701", 6) != 0) {
                        printf("Error parsing cpio header.\n");
                        break;
                }

                if (memcmp(ptr + sizeof(*header), "TRAILER!!!", 10) == 0) {
                        printf("Parsing ended successfully.\n");
                        break;
                }

                char buf[128] = {};
                buf[8] = 0;
                buf[127] = 0;

                memcpy(buf, header->c_mode, 8);
                const auto c_mode = strtoul(buf, nullptr, 16);
                memcpy(buf, header->c_namesize, 8);
                const auto c_namesize = strtoul(buf, nullptr, 16);
                memcpy(buf, header->c_filesize, 8);
                const auto c_filesize = strtoul(buf, nullptr, 16);

                ptr += sizeof(*header);
                if (c_namesize > 128) {
                        printf("Path too long, currently unsupported.\n");
                        break;
                }
                memcpy(buf, ptr, c_namesize);

                if ((c_mode & 0xf000) == 0x4000) {
                        const int dirfd = open(buf, O_DIRECTORY | O_CREAT);
                        close(dirfd);

                        ptr += c_namesize;

                        const unsigned int padding = 4 - ((unsigned int) ptr % 4);
                        ptr += padding % 4;
                }
                else {
                        const int fd = open(buf, O_CREAT);
                        ptr += c_namesize;
                        unsigned int padding = 4 - ((unsigned int) ptr % 4);
                        ptr += padding % 4;

                        write(fd, ptr, c_filesize);

                        close(fd);

                        ptr += c_filesize;

                        padding = 4 - ((unsigned int) ptr % 4);
                        ptr += padding % 4;
                }
        }

        while (1) {
                printf(" > ");
                char buffer[256];
                if (fgets(buffer, sizeof(buffer), stdin) == nullptr) {
                        continue;
                }
                buffer[strcspn(buffer, "\n")] = '\0';
                const char *cmd = kstrtok(buffer, " ");

                if (strcmp(cmd, "help") == 0 || strcmp(cmd, "h") == 0) {
                        printf("Temporarily available commands:\n"
                                "\t  (h)elp - prints this help screen\n"
                                "\t   (r)un - runs specified app, if no argument is provided runs proc2\n"
                                "\t           (standard input test). Proc1 is already running (diode)\n"
                                "\t  (k)ill - kills proc1 (diode)\n"
                                "\t(m)orcik - prints a colorful message\n"
                                "\t     rls - runs raw-bytes written ls command (mock for userspace program)\n\t---\n"
                                "\t      ls - lists current directory\n"
                                "\t   mkdir - creates a directory under specified path\n"
                                "\t   touch - creates a file under specified path\n"
                                "\t     cat - reads file contents\n"
                                "\t  (e)cho - writes to standard input or redirects to a file\n"
                                "\t rawecho - writes converted hexadecimal bytes to specified file (max 128 bytes)\n\n");
                }
                else if (strcmp(cmd, "run") == 0 || strcmp(cmd, "r") == 0) {
                        const char *path = kstrtok(nullptr, " ");
                        char const *path_tok = kstrtok(nullptr, " ");
                        printf("\x1b[96;40m[PATER ADAMVS]\x1b[0m I will be waiting until my child is dead . . .\n");

                        const int fd = open(path, O_BINARY);
                        if (fd > 0) {
                                const char *path_arg = path_tok ? path_tok : "";

                                char *const program_args[] = {path, path_arg, nullptr};
                                spawn(fd, nullptr, nullptr, program_args, nullptr);
                                close(fd);
                        }
                        else {
                                spawnp((void *) &proc2_main, nullptr, nullptr, nullptr, nullptr);
                        }

                        int code;
                        const int returned_pid = wait(&code);

                        printf("\n\x1b[96;40m[PATER ADAMVS]\x1b[0m Child process %i exited with code %i.\n",
                               returned_pid, code);
                }
                else if (strcmp(cmd, "kill") == 0 || strcmp(cmd, "k") == 0) {
                        printf("You are willing to kill the process. Choose (1) SIGTERM or (2) SIGKILL: ");

                        char line[80];
                        fgets(line, sizeof(line), stdin);
                        const int choice = strtol(line, nullptr, 10);


                        if (choice == 1) {
                                kill(proc1_pid, SIGTERM);
                        }
                        else if (choice == 2) {
                                kill(proc1_pid, SIGKILL);
                        }
                        else {
                                printf("This is not a valid signal. I won't kill the process.\n");
                        }
                }
                else if (strcmp(cmd, "morcik") == 0 || strcmp(cmd, "m") == 0) {
                        printf("\x1b[95;40mMeine beliebte Olga ist die sch\xf6nste Frau auf der Welt\n\x1b[0m");
                }
                else if (strcmp(cmd, "rls") == 0) {
                        char const *path_tok = kstrtok(nullptr, " ");
                        const char *path = path_tok ? path_tok : "";

                        char *const ls_argv[] = {"ls", path, nullptr};
                        spawnp((void *) raw_ls + 1, nullptr, nullptr, ls_argv, nullptr);
                        int code;
                        const int returned_pid = wait(&code);

                        printf("\n\x1b[96;40m[PATER ADAMVS]\x1b[0m Child raw-bytes process %i exited with code %i.\n",
                               returned_pid, code);
                }
                else if (strcmp(cmd, "echo") == 0 || strcmp(cmd, "e") == 0) {
                        const char *text = kstrtok(nullptr, ">");
                        const char *path = kstrtok(nullptr, "");
                        if (!text) {
                                continue;
                        }

                        if (!path) {
                                printf("%s\n", text);
                                continue;
                        }

                        int fd = open(path, O_WRONLY);
                        if (fd < 0) {
                                printf("No such file.\n");
                                continue;
                        }

                        write(fd, text, strlen(text) + 1); // with EOF

                        close(fd);
                }
                else if (strcmp(cmd, "rawecho") == 0) {
                        const char *text = kstrtok(nullptr, ">");
                        const char *path = kstrtok(nullptr, "");
                        if (!text || !path) {
                                continue;
                        }

                        int fd = open(path, O_BINARY);
                        if (fd < 0) {
                                printf("No such file.\n");
                                continue;
                        }

                        uint8_t bytes[128] = {};
                        memset(bytes, 0, 128);
                        size_t index = 0;

                        const char *ptr = text;
                        char *endptr;
                        while (*ptr) {
                                while (*ptr == ' ') {
                                        ptr += 1;
                                }

                                if (*ptr == '\0') {
                                        break;
                                }

                                long value = strtol(ptr, &endptr, 16);

                                if (ptr == endptr) {
                                        // No valid number found
                                        break;
                                }

                                // Clamp to uint8_t range
                                if (value < 0 || value > 0xFF) {
                                        printf("Warning: value out of range (0x%lX)\n", value);
                                        break;
                                }

                                bytes[index++] = (uint8_t) value;

                                // Move pointer to next potential number
                                ptr = endptr;
                        }

                        write(fd, bytes, index);

                        close(fd);
                }
                else if (strcmp(cmd, "ls") == 0) {
                        const char *path_tok = kstrtok(nullptr, " ");
                        const char *path = path_tok == nullptr ? "" : path_tok;
                        const int dirfd = open(path, O_DIRECTORY | O_RDONLY);

                        if (dirfd < 0) {
                                printf("No such file.");
                                continue;
                        }

                        struct DirectoryEntry dentry;
                        while (readdir(dirfd, &dentry) == 1) {
                                printf("%c %s\n", dentry.file_type, dentry.name);
                        }

                        lseek(dirfd, 0, SEEK_SET);
                }
                else if (strcmp(cmd, "mkdir") == 0) {
                        const char *path = kstrtok(nullptr, " ");
                        if (!path) {
                                continue;
                        }

                        int dirfd = open(path, O_DIRECTORY | O_CREAT);
                        close(dirfd);
                }
                else if (strcmp(cmd, "touch") == 0) {
                        const char *path = kstrtok(nullptr, " ");
                        if (!path) {
                                continue;
                        }

                        int fd = open(path, O_CREAT);
                        close(fd);
                }
                else if (strcmp(cmd, "cat") == 0) {
                        const char *path = kstrtok(nullptr, " ");
                        if (!path) {
                                continue;
                        }

                        int fd = open(path, O_RDONLY);
                        if (fd < 0) {
                                printf("No such file.\n");
                                continue;
                        }

                        char file_contents[128] = {};
                        read(fd, &file_contents, 128);
                        printf("File contents: %s\n", file_contents);
                        close(fd);
                }
                else if (strcmp(cmd, "cd") == 0) {
                        const char *path = kstrtok(nullptr, " ");

                        const int code = chdir(path);
                        if (code == -1) {
                                printf("No such file.\n");
                        }
                }
                else if (strcmp(cmd, "pwd") == 0) {
                        char buf[64];
                        char *ptr = buf;
                        char *ret = getcwd(ptr, 64);

                        printf("%s\n", ret);
                }
                else {
                        printf("\x1b[96;40m[PATER ADAMVS]\x1b[0m command unknown, type (h)elp to get help.\n");
                }
        }
}

int main(void) {
        reset_subsys();
        setup_internal_clk();
        uart_init();
        uart_clr_screen();
        vga_init(8, 9, 2);

        init_pin_output(25);
        init_pin_output(11);

        void *msp;
        __asm__("mrs    %0, msp" : "=r"(msp));
        scheduler_init(msp);


        struct Dentry *root = ramfs_mount(nullptr, nullptr, nullptr, 0);
        // constexpr size_t root_dirs_count = 7;
        // const char *root_dirs[root_dirs_count] = {"bin", "boot", "dev", "etc", "home", "proc", "sbin"};
        constexpr size_t root_dirs_count = 1;
        const char *root_dirs[root_dirs_count] = {"dev"};
        for (size_t i = 0; i < root_dirs_count; ++i) {
                struct Dentry file = {
                        .name = root_dirs[i],
                };
                root->inode->i_op->create(root->inode, &file, S_IFDIR | 0666);
        }

        struct Dentry dev_dentry = {.name = "dev"};
        struct Dentry *dev = root->inode->i_op->lookup(root->inode, &dev_dentry, 0);
        struct Dentry tty_dentry = {
                .name = "tty0",
        };
        dev->inode->i_op->create(dev->inode, &tty_dentry, S_IFCHR | 0666);
        struct Dentry *tty = dev->inode->i_op->lookup(dev->inode, &tty_dentry, 0);

        init_tty();
        setup_tty_chrfile(tty->inode);
        init_keyboard(14);

        //TODO: REPLACE WITH PRINTK
        // printf("\x1b[40;47mWelcome in the kernel.\x1b[0m\n"
        //         "\x1b[92;40mSwitching to init process (temporary shell).\x1b[0m\n");
#if 0
        // create root directory and two test files

        struct Dentry file1 = {
                .name = "test.txt",
        };
        struct Dentry file2 = {
                .name = "a.out",
        };
        root_inode->i_op->create(root_inode, &file1, 0666);
        root_inode->i_op->create(root_inode, &file2, 0777);


        // usage read first file in directory
        struct File parent_handler = {
                .f_inode = root_inode,
                .f_op = root_inode->i_fop,
        };

        char buf[512];
        parent_handler.f_op->read(&parent_handler, &buf, 512, 0);
        size_t first_size = ((struct DirectoryEntry *) (&buf))->rec_len;
        struct DirectoryEntry *first_dentry = kmalloc(first_size);
        for (size_t i = 0; i < first_size; ++i) {
                *((char *) (first_dentry) + i) = buf[i];
        }

        auto first_inode = (struct VFS_Inode *) root->sb->inode_table[first_dentry->inode_index];
        printf("Mode: %o UID: %i GID: %i <time> %ldB %s\n", first_inode->i_mode,
               first_inode->i_uid,
               first_inode->i_gid, first_inode->i_size,
               first_dentry->name);

        // write to first file
        printf("\nWriting to file . . .\n\n");
        struct File first_file = {
                .f_inode = first_inode,
                .f_pos = 0,
        };
        char message[] = "Hello World!";
        first_inode->i_fop->write(&first_file, &message, sizeof(message), 0);

        char bytes_in_file[512];
        first_inode->i_fop->read(&first_file, &bytes_in_file, first_inode->i_size, 0);
        printf("New File Contents:\n\t%s\n", bytes_in_file);

        printf("New File Status:\nMode: %o UID: %i GID: %i <time> %ldB %s\n", first_inode->i_mode,
               first_inode->i_uid,
               first_inode->i_gid, first_inode->i_size,
               first_dentry->name);
#endif

        create_process_init((void (*)(void)) PATER_ADAMVS, root->inode);
        run_process_init();
        return 0;
}
